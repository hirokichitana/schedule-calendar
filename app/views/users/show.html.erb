<% breadcrumb :users_show %>

<div class="container">
  <% @user.each do |user| %>
    <div class="user-top">
      <div class="user-name">
        <h5><%= user.name %>さんのマイページ</h5>
      </div>
      <div class="top-content">
        <% if user_signed_in? %>
          <% unless current_user.id == user.id %>
            <div class="mail-link">
              <%= mail_to user.email, "#{user.name}さんへメールを送る", class: "btn btn-outline-dark" %>
            </div>
          <% else %>
            <div class="mail-link">
              <%= link_to "ユーザー情報変更", edit_user_registration_path, class: "btn btn-outline-dark" %>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>

    <table class="detail-table">
      <tbody>
        <tr>
          <th class="detail-item">名前</th>
          <td class="detail-value"><%= user.name %></td>
        </tr>
        <tr>
          <th class="detail-item">電話番号</th>
          <td class="detail-value"><%= user.telephone_number %></td>
        </tr>
        <tr>
          <th class="detail-item">メールアドレス</th>
          <td class="detail-value"><%= user.email %></td>
        </tr>
        <tr>
          <th class="detail-item">誕生日</th>
          <td class="detail-value"><%= user.birth_date %></td>
        </tr>
        <tr>
          <th class="detail-item">所属部署</th>
          <td class="detail-value"><%= user.department %></td>
        </tr>
        <tr>
          <th class="detail-item">役職</th>
          <td class="detail-value"><%= user.position %></td>
        </tr>
      </tbody>
    </table>
  <% end %>

  <div class="container">
    <%= month_calendar events: @schedules do |date, schedules| %>
      <%= date.day %>

      <% schedules.each do |schedule| %>
        <li>
          <%= link_to schedule.title, schedule_path(schedule.id), method: :get %>
          <div>
            (<%= link_to schedule.user.name, user_path(schedule.user.id), method: :get %>)
          </div>
        </li>
      <% end %>
    <% end %>
  </div>
</div>
